{% comment %}
  Custom head content for Randhawa Inc. website
  This file includes meta tags, fonts, favicons, and scripts for enhanced functionality and appearance.
{% endcomment %}

<!-- Security Headers -->
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://utteranc.es https://cdn.jsdelivr.net https://www.googletagmanager.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; frame-src https://player.twitch.tv https://utteranc.es; connect-src 'self' https://api.github.com;">
<meta http-equiv="X-Frame-Options" content="DENY">
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="X-XSS-Protection" content="1; mode=block">
<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
<meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), interest-cohort=()">

<!-- Resource Hints for Performance -->
<link rel="dns-prefetch" href="https://fonts.googleapis.com">
<link rel="dns-prefetch" href="https://fonts.gstatic.com">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<link rel="dns-prefetch" href="https://utteranc.es">

<!-- Fonts - Optimized weights -->
<!-- Cormorant Garamond for main text and Courier Prime for code or monospace text -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Courier+Prime&display=swap" rel="stylesheet" media="all">

<!-- Critical CSS inlined for performance -->
<style>
  /* Critical above-the-fold styles */
  :root {
    --background-color-rgb: 248, 244, 233;
    --background-color: #f8f4e9;
    --text-color: #1c1310;
    --heading-color: #5e3a1d;
    --link-color: #663106;
    --t-duration: 0.2s;
    --t-easing: ease;
  }
  html { font-size: 16px; }
  body {
    font-family: 'Cormorant Garamond', serif;
    background-color: var(--background-color);
    color: var(--text-color);
    font-size: 19px;
    font-weight: 600;
    margin: 0;
    padding-top: 60px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    line-height: 1.5;
  }
  .site-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    padding: 0.2rem 0;
    min-height: 45px;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    background-color: rgba(var(--background-color-rgb), 0.55);
    font-family: 'Cormorant Garamond', serif;
  }
  .wrapper { max-width: calc(800px - 60px); margin: 0 auto; padding: 0 30px; }
  .site-title {
    font-size: 26px;
    font-weight: 300;
    line-height: 54px;
    letter-spacing: -1px;
    margin-bottom: 0;
    float: left;
    color: var(--text-color);
    text-decoration: none;
  }
  h1, h2, h3 { color: var(--heading-color); font-weight: 1000; }
  a { color: var(--link-color); text-decoration: none; }
  .no-transition * { transition: none !important; }
</style>

<!-- Preload non-critical assets -->
<link rel="preload" href="{{ '/assets/css/style.css' | relative_url }}" as="style">
<link rel="preload" href="{{ '/assets/js/bundle.js' | relative_url }}" as="script">

<!-- Favicons and device-specific icons -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000">
<link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="384x384" href="/android-chrome-384x384.png">

<!-- Application metadata -->
<meta name="application-name" content="Randhawa Inc.">
<meta name="apple-mobile-web-app-title" content="Randhawa Inc.">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<!-- Microsoft Tile -->
<meta name="msapplication-TileImage" content="/mstile-150x150.png">
<meta name="msapplication-TileColor" content="#da532c">

<!-- Theme color -->
<!-- Default theme color -->
<meta name="theme-color" content="#f8f4e9" id="theme-color-meta">
<!-- Light mode theme color -->
<meta name="theme-color" content="#f8f4e9" media="(prefers-color-scheme: light)">
<!-- Dark mode theme color -->
<meta name="theme-color" content="#1a1410" media="(prefers-color-scheme: dark)">

<!-- Font preloading optimized -->
<link rel="preload" href="/assets/fonts/FleurCornerCaps.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://fonts.gstatic.com/s/cormorantgaramond/v16/co3YmX5slCNuHLi8bLeY9MK7whWMhyjQrUVjWnSFfMrWWg.woff2" as="font" type="font/woff2" crossorigin>

<!-- PWA settings -->
<link rel="manifest" href="/manifest.json">

<!-- Main JavaScript file loaded in base layout -->

<!-- Script to open external links in new tab -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var links = document.links;
    for (var i = 0, linksLength = links.length; i < linksLength; i++) {
      if (links[i].hostname !== window.location.hostname) {
        links[i].target = '_blank';
        links[i].rel = 'noopener noreferrer';
      }
    }
  });
</script>

<!-- Script for smooth color scheme transitions -->
<script>
  function applyTransitionClass() {
    document.body.classList.add('transition-colors');
  }

  function removeTransitionClass() {
    document.body.classList.remove('transition-colors');
  }

  function handlePageLoad() {
    applyTransitionClass();
    setTimeout(removeTransitionClass, 300);
  }

  document.addEventListener('DOMContentLoaded', handlePageLoad);
</script>

<!-- MathJax -->
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" 
          integrity="sha384-fNl9rj/eK1wEYfKc26CbPM6qkVQ+9MvYaoAFNql4ulbjBp888ROQQOqSwwq8YIXp" 
          crossorigin="anonymous"></script>

<!-- Optimized Open Graph tags -->
<meta property="og:title" content="{% if page.title %}{{ page.title | escape | strip_html }}{% else %}{{ site.title | escape | strip_html }}{% endif %}">
<meta property="og:description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 | escape }}{% else %}{{ site.description | strip_html | escape }}{% endif %}">
<meta property="og:image" content="https://prabhchintan.com/assets/images/og-image-small.webp">
<meta property="og:image:secure_url" content="https://prabhchintan.com/assets/images/og-image-small.webp">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:type" content="image/webp">
<!-- Fallback for older platforms -->
<meta property="og:image" content="https://prabhchintan.com/assets/images/og-image-small.jpg">
<meta property="og:url" content="https://prabhchintan.com{{ page.url | replace:'index.html','' }}">
<meta property="og:type" content="website">
<meta property="og:site_name" content="Prabhchintan">